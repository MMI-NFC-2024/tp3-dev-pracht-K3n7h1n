---
import Layout from "../layouts/Layout.astro";
---

<Layout>


  <h1 class="text-2xl mb-6">Navigation avec iframe</h1>

  
  <nav class="mb-6">
    <div class="flex space-x-4 items-center">
      <label for="species-select" class="text-gray-700">Choisir une espèce:</label>
      <select id="species-select" class="rounded border border-gray-300 px-3 py-2">
        <option value="Adelie">Adelie</option>
        <option value="Gentoo">Gentoo</option>
        <option value="Chinstrap">Chinstrap</option>
      </select>
    </div>
  </nav>


  <iframe 
    name="species-frame"
    src="/species/ifram/Adelie"
    class="w-full border border-gray-300 rounded"
    id="species-iframe"
    style="height: 550px;"
    onload="adjustHeight()"
  ></iframe>

  <script>
    // Gestion du changement d'espèce via le select
    document.querySelector("#species-select")?.addEventListener("change", (evt) => {
      const value = (evt.target as HTMLSelectElement).value;
      const iframe = document.getElementById('species-iframe') as HTMLIFrameElement;
      if (iframe && value) {
        iframe.src = "/species/ifram/" + value;
      }
    });

    // Fonction d'ajustement de la hauteur
    function adjustHeight() {
      const iframe = document.getElementById('species-iframe') as HTMLIFrameElement;
      if (iframe) {
        const windowHeight = window.innerHeight;
        const newHeight = Math.max(windowHeight * 0.6, 550);
        iframe.style.height = newHeight + 'px';
      }
    }
    
    window.addEventListener('resize', adjustHeight);
    document.addEventListener('DOMContentLoaded', adjustHeight);
  </script>

</Layout>